webpackJsonp([1],{NHnr:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("7+uW"),i=e("zL8q"),n=e.n(i),r=(e("tvR6"),{render:function(){var t=this.$createElement,a=this._self._c||t;return a("div",[a("el-row",{staticClass:"header",attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{span:6}},[a("img",{staticClass:"logo",attrs:{src:"static/img/common/logo2020-.png"}})]),this._v(" "),a("el-col",{attrs:{offset:12,span:4}},[a("span",[this._v("使用说明")])])],1)],1)},staticRenderFns:[]});var o={name:"App",components:{Header:e("VU/8")({name:"Header",data:function(){return{}},methods:{}},r,!1,function(t){e("UaDF")},"data-v-71124567",null).exports},data:function(){return{path:""}},mounted:function(){this.path=this.$route.path},watch:{$route:function(t,a){this.path=t.path}}},l={render:function(){var t=this.$createElement,a=this._self._c||t;return a("div",{attrs:{id:"app"}},[a("Header"),this._v(" "),a("router-view")],1)},staticRenderFns:[]},c=e("VU/8")(o,l,!1,null,null,null).exports,d=e("/ocq"),h=e("woOf"),u=e.n(h),g=e("fZjL"),m=e.n(g),p=e("XLwt"),v=e.n(p);e("lHA8"),e("c/Tr"),e("pFYg");var f={data:function(){return{$_sidebarElm:null}},mounted:function(){var t,a,e,s,i,n,r,o,l,c=this;this.__resizeHandler=(t=function(){c.chart&&c.chart.resize()},a=100,s=void 0,i=void 0,n=void 0,r=void 0,o=void 0,l=function l(){var c=+new Date-r;c<a&&c>0?s=setTimeout(l,a-c):(s=null,e||(o=t.apply(n,i),s||(n=i=null)))},function(){for(var i=arguments.length,c=Array(i),d=0;d<i;d++)c[d]=arguments[d];n=this,r=+new Date;var h=e&&!s;return s||(s=setTimeout(l,a)),h&&(o=t.apply(n,c),n=c=null),o}),window.addEventListener("resize",this.__resizeHandler),this.$_sidebarElm=document.getElementsByClassName("sidebar-container")[0],this.$_sidebarElm&&this.$_sidebarElm.addEventListener("transitionend",this.$_sidebarResizeHandler)},beforeDestroy:function(){window.removeEventListener("resize",this.__resizeHandler),this.$_sidebarElm&&this.$_sidebarElm.removeEventListener("transitionend",this.$_sidebarResizeHandler)},methods:{$_sidebarResizeHandler:function(t){"width"===t.propertyName&&this.__resizeHandler()}}};e("tcAE");var _={mixins:[f],props:{className:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"550px"},figureData:{type:Object,required:!0}},data:function(){return{chart:null}},watch:{figureData:{deep:!0,handler:function(t){console.log(1),this.initChart()}}},mounted:function(){var t=this;this.$nextTick(function(){t.initChart()})},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},methods:{initChart:function(){this.chart=v.a.init(this.$el,"macarons"),m()(this.figureData).length&&(console.log(this.figureData),this.chart.setOption({title:{text:""},tooltip:{},animationDurationUpdate:1500,animationEasingUpdate:"quinticInOut",label:{normal:{show:!0,textStyle:{fontSize:12}}},legend:{x:"center",show:!1,data:["查询","机构","专家","起点"]},series:[{type:"graph",layout:"force",symbolSize:45,focusNodeAdjacency:!0,roam:!0,categories:[{name:"查询",itemStyle:{normal:{color:"#FF7F50"}}},{name:"机构",itemStyle:{normal:{color:"#1E90FF"}}},{name:"专家",itemStyle:{normal:{color:"#FF1493"}}},{name:"起点",itemStyle:{normal:{color:"#32CD32"}}}],label:{normal:{show:!0,textStyle:{fontSize:12}}},force:{repulsion:3e3},edgeSymbolSize:[4,50],edgeLabel:{normal:{show:!0,textStyle:{fontSize:10},formatter:"{c}"}},data:this.figureData.nodes,links:this.figureData.lines,lineStyle:{normal:{opacity:.9,width:1,curveness:0}}}]}),console.log(this.chart.getOption()))}}},y={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{class:this.className,style:{height:this.height,width:this.width}})},staticRenderFns:[]},D=e("VU/8")(_,y,!1,null,null,null).exports,b=e("7t+N"),C=e.n(b);e("BO1k");var w={name:"home",components:{figureChart:D},data:function(){return{searchShow:!1,name:"",org:"",startName:"",startOrg:"",nodeName:"",nodeOrg:"",experts:[],typeInfo:1,foldList:{},showPath:[],left:"20%",figureData:{},isNode:!1,loading:!1}},methods:{search:function(){if(this.name)if(this.org)if(this.startOrg)if(this.loading=!0,this.searchShow=!0,this.startOrg||this.startName){var t=this.assemblyData(this.name,this.org),a=this.getPid(t),e=this.assemblyData(this.startName,this.startOrg),s={type:"4",p1:a,p2:this.getPid(e)},i={name:this.startName||"",org:this.startOrg||""};this.showPath.push(i),this.getData(s,4)}else{var n=this.assemblyData(this.name,this.org);this.getData(n)}else this.$message("请输入起点机构");else this.$message("请输入查询机构");else this.$message("请输入查询姓名")},assemblyData:function(t,a){var e=void 0,s=void 0;switch(t&&a?e="3":!t&&a?e="2":t&&!a&&(e="1"),e){case"1":s={type:e,s_name:t};break;case"2":s={type:e,s_org:a};break;case"3":default:s={type:e,s_name:t,s_org:a}}return s},getData:function(t,a){var e=this;C.a.ajax({type:"post",url:"http://183.136.237.197/graph_db",data:t,dataType:"json",success:function(t){if(e.loading=!1,t.data.length){var a=[],s=t.chartdata.nodes.map(function(t,e){return a.push({rid:t.rid.cluster+t.rid.position}),e?"Organization"===t.oClass?{name:t.oData.Name,category:1,draggable:!0}:"Expert"===t.oClass?{name:t.oData.Name+"\n("+t.oData.Organization+")",category:2,draggable:!0}:void 0:{name:t.oData.Name,draggable:!0}}),i=t.chartdata.lines.map(function(t){var e=t.start.rid.cluster+t.start.rid.position,s=t.end.rid.cluster+t.end.rid.position,i=void 0,n=void 0;return a.forEach(function(t,a){e===t.rid&&(i=a),s===t.rid&&(n=a)}),{source:i,target:n,value:t.type}});e.figureData=u()({},e.figureData,{nodes:s,lines:i})}else e.$message("无有效合作关系信息！")}})},getPid:function(t){var a=void 0;return C.a.ajax({type:"post",url:"http://183.136.237.197/graph_db",data:t,dataType:"json",async:!1,success:function(t){a=t}}),a.data.length?"#"+a.data[0].rid.cluster+":"+a.data[0].rid.position:(this.$message("无有效合作关系信息！"),void(this.loading=!1))}},mounted:function(){},watch:{}},x={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"layer"},[e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"home"},[e("div",{staticClass:"home-header MT_50"},[e("el-divider",{attrs:{"content-position":"left"}},[t._v("学者合作路径查询")]),t._v(" "),e("div",{staticClass:"home-header-search PR_20 PL_20"},[e("span",[t._v("查询人名")]),t._v(" "),e("el-input",{staticClass:"ML_30",attrs:{placeholder:"必填"},model:{value:t.name,callback:function(a){t.name=a},expression:"name"}}),t._v(" "),e("span",{staticClass:"ML_30"},[t._v("查询机构")]),t._v(" "),e("el-input",{staticClass:"ML_30",attrs:{placeholder:"必填"},model:{value:t.org,callback:function(a){t.org=a},expression:"org"}})],1),t._v(" "),e("div",{staticClass:"home-header-search PR_20 PL_20"},[e("span",[t._v("起点人名")]),t._v(" "),e("el-input",{staticClass:"ML_30",attrs:{placeholder:"请输入姓名"},model:{value:t.startName,callback:function(a){t.startName=a},expression:"startName"}}),t._v(" "),e("span",{staticClass:"ML_30"},[t._v("起点机构")]),t._v(" "),e("el-input",{staticClass:"ML_30",attrs:{placeholder:"必填"},model:{value:t.startOrg,callback:function(a){t.startOrg=a},expression:"startOrg"}}),t._v(" "),e("el-button",{staticClass:"ML_30",attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.search}},[t._v("搜索")])],1)],1),t._v(" "),e("div",{staticClass:"home-msg MT_50"},[t.experts.length>10?e("span",{staticStyle:{color:"red"}},[t._v("当前查询到的结果较多，您可以通过输入机构进行筛选")]):t._e()]),t._v(" "),e("div",{staticClass:"home-body row MT_50"},[e("div",{staticClass:"home-body-relation"},[e("el-divider",{attrs:{"content-position":"left"}},[t._v("合作关系")]),t._v(" "),e("div",{staticClass:"PL_50 PR_50"},[t._m(0),t._v(" "),e("div",{staticClass:"row relation-echart"},[e("figureChart",{staticClass:"MT_30",staticStyle:{width:"100%"},attrs:{figureData:t.figureData}})],1)])],1)])])])},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"relation-top row "},[a("div",[a("span",[this._v("展示路径：")])])])}]};var E=e("VU/8")(w,x,!1,function(t){e("co3m")},null,null).exports,N={name:"home",components:{figureChart:D},data:function(){return{searchShow:!1,name:"zhuang,yueting",org:"zhejiang univ",showPath:[],figureData1:{},figureData2:{},figureData3:{},loading:!1}},methods:{search:function(){if(this.name)if(this.org){this.loading=!0,this.searchShow=!0;var t=this.assemblyData(this.name,this.org),a=this.getPid(t),e={type:"5",p1:a},s={type:"6",p1:a},i={type:"7",p1:a};this.getData(e,5),this.getData(s,6),this.getData(i,7)}else this.$message("请输入查询机构");else this.$message("请输入查询姓名")},assemblyData:function(t,a){var e=void 0,s=void 0;switch(t&&a?e="3":!t&&a?e="2":t&&!a&&(e="1"),e){case"1":s={type:e,s_name:t};break;case"2":s={type:e,s_org:a};break;case"3":default:s={type:e,s_name:t,s_org:a}}return s},getData:function(t,a){var e=this;C.a.ajax({type:"post",url:"http://183.136.237.197/graph_db",data:t,dataType:"json",success:function(t){if(e.loading=!1,t.data.length){if(5===a){var s=[],i=[];t.data.forEach(function(t,a){a?("Organization"===t.oClass?s.push({name:t.oData.Name+a,category:1,draggable:!0}):"Expert"===t.oClass&&s.push({name:t.oData.Name+"\n("+t.oData.Organization+")"+a,category:2,draggable:!0}),i.push({source:0,rid:t.rid.cluster+t.rid.position,target:a,value:"合作关系"})):s.push({name:t.oData.Name+"\n("+t.oData.Organization+")"+a,draggable:!0})}),e.figureData1=u()({},e.figureData1,{nodes:s,lines:i})}if(6===a){var n=[],r=[];t.data.forEach(function(t,a){a?("Organization"===t.oClass?n.push({name:t.oData.Name+a,category:1,draggable:!0}):"Expert"===t.oClass&&n.push({name:t.oData.Name+"\n("+t.oData.Organization+")"+a,category:2,draggable:!0}),r.push({source:0,target:a,value:"合作关系"})):n.push({name:t.oData.Name+"\n("+t.oData.Organization+")"+a,draggable:!0})}),e.figureData2=u()({},e.figureData2,{nodes:n,lines:r})}if(7===a){var o=[],l=[];t.data.forEach(function(t,a){a?("Organization"===t.oClass?o.push({name:t.oData.Name+a,category:1,draggable:!0}):"Expert"===t.oClass&&o.push({name:t.oData.Name+"\n("+t.oData.Organization+")"+a,category:2,draggable:!0}),l.push({source:0,target:a,value:"合作关系"})):o.push({name:t.oData.Name+"\n("+t.oData.Organization+")"+a,draggable:!0})}),e.figureData3=u()({},e.figureData3,{nodes:o,lines:l})}console.log(e.figureData1)}else e.$message("无有效合作关系信息！")}})},getPid:function(t){var a=void 0;return C.a.ajax({type:"post",url:"http://183.136.237.197/graph_db",data:t,dataType:"json",async:!1,success:function(t){a=t}}),a.data.length?"#"+a.data[0].rid.cluster+":"+a.data[0].rid.position:(this.$message("无有效合作关系信息！"),void(this.loading=!1))}},mounted:function(){},watch:{}},$={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"layer"},[e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"home"},[e("div",{staticClass:"home-header MT_50"},[e("el-divider",{attrs:{"content-position":"left"}},[t._v("学者合作路径查询")]),t._v(" "),e("div",{staticClass:"home-header-search PR_20 PL_20"},[e("span",[t._v("查询人名")]),t._v(" "),e("el-input",{staticClass:"ML_30",attrs:{placeholder:"必填"},model:{value:t.name,callback:function(a){t.name=a},expression:"name"}}),t._v(" "),e("span",{staticClass:"ML_30"},[t._v("查询机构")]),t._v(" "),e("el-input",{staticClass:"ML_30",attrs:{placeholder:"必填"},model:{value:t.org,callback:function(a){t.org=a},expression:"org"}}),t._v(" "),e("el-button",{staticClass:"ML_30",attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.search}},[t._v("搜索")])],1)],1),t._v(" "),e("div",{staticClass:"home-body row MT_50"},[e("div",{staticClass:"home-body-relation"},[e("el-divider",{attrs:{"content-position":"left"}},[t._v("合作关系")]),t._v(" "),e("div",{staticClass:"PL_50 PR_50"},[t._m(0),t._v(" "),e("div",{staticClass:"row relation-echart"},[e("figureChart",{staticClass:"MT_30",staticStyle:{width:"100%"},attrs:{figureData:t.figureData1}})],1)])],1),t._v(" "),e("div",{staticClass:"home-body-relation"},[e("el-divider",{attrs:{"content-position":"left"}},[t._v("合作关系")]),t._v(" "),e("div",{staticClass:"PL_50 PR_50"},[t._m(1),t._v(" "),e("div",{staticClass:"row relation-echart"},[e("figureChart",{staticClass:"MT_30",staticStyle:{width:"100%"},attrs:{figureData:t.figureData2}})],1)])],1),t._v(" "),e("div",{staticClass:"home-body-relation"},[e("el-divider",{attrs:{"content-position":"left"}},[t._v("合作关系")]),t._v(" "),e("div",{staticClass:"PL_50 PR_50"},[t._m(2),t._v(" "),e("div",{staticClass:"row relation-echart"},[e("figureChart",{staticClass:"MT_30",staticStyle:{width:"100%"},attrs:{figureData:t.figureData3}})],1)])],1)])])])},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"relation-top row"},[a("div",[a("span",[this._v("展示路径：同机构学者")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"relation-top row"},[a("div",[a("span",[this._v("展示路径：中国论文合作者")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"relation-top row"},[a("div",[a("span",[this._v("展示路径：中国同领域学者")])])])}]};var z=e("VU/8")(N,$,!1,function(t){e("l686")},null,null).exports;s.default.use(d.a);var O=new d.a({routes:[{path:"/",name:"Home",component:E},{path:"/talent",name:"talent",component:z}]}),L=e("NYxO");s.default.use(L.a);var S=new L.a.Store({state:{bAuth:!1},mutations:{loginStatue:function(t,a){t.bAuth=a}}}),P=(e("j1ja"),e("Yg9U")),M=e.n(P);e("yh13");s.default.config.productionTip=!1,s.default.use(n.a),s.default.use(M.a),O.beforeEach(function(t,a,e){t.meta.requiresAuth?S.state.bAuth?e():(alert("请先登录"),e("/Login")):e(),document.body.scrollTop=0,document.documentElement.scrollTop=0,window.pageYOffset=0,e()}),new s.default({el:"#app",router:O,components:{App:c},template:"<App/>"})},UaDF:function(t,a){},co3m:function(t,a){},l686:function(t,a){},tvR6:function(t,a){},yh13:function(t,a){}},["NHnr"]);
//# sourceMappingURL=app.593aa2a50e90a136ded1.js.map